(this.webpackJsonpzboard=this.webpackJsonpzboard||[]).push([[0],{18:function(e,t,a){e.exports=a(44)},23:function(e,t,a){},24:function(e,t,a){},42:function(e,t,a){},43:function(e,t,a){},44:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),s=a(12),o=a.n(s),i=(a(23),a(13)),l=a(14),c=a(17),u=a(15),m=a(16);a(24);function d(){return(d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e}).apply(this,arguments)}function f(e,t){if(null==e)return{};var a,r,n=function(e,t){if(null==e)return{};var a,r,n={},s=Object.keys(e);for(r=0;r<s.length;r++)a=s[r],t.indexOf(a)>=0||(n[a]=e[a]);return n}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)a=s[r],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}var p=n.a.createElement("title",null,"person"),v=n.a.createElement("desc",null,"Created with Sketch."),g=n.a.createElement("g",{id:"Icons",stroke:"none",strokeWidth:1,fill:"none",fillRule:"evenodd"},n.a.createElement("g",{id:"Rounded",transform:"translate(-138.000000, -4102.000000)"},n.a.createElement("g",{id:"Social",transform:"translate(100.000000, 4044.000000)"},n.a.createElement("g",{id:"-Round-/-Social-/-person",transform:"translate(34.000000, 54.000000)"},n.a.createElement("g",null,n.a.createElement("polygon",{id:"Path",points:"0 0 24 0 24 24 0 24"}),n.a.createElement("path",{d:"M12,12 C14.21,12 16,10.21 16,8 C16,5.79 14.21,4 12,4 C9.79,4 8,5.79 8,8 C8,10.21 9.79,12 12,12 Z M12,14 C9.33,14 4,15.34 4,18 L4,19 C4,19.55 4.45,20 5,20 L19,20 C19.55,20 20,19.55 20,19 L20,18 C20,15.34 14.67,14 12,14 Z",id:"\\uD83D\\uDD39-Icon-Color",fill:"#1D1D1D"})))))),h=function(e){var t=e.svgRef,a=e.title,r=f(e,["svgRef","title"]);return n.a.createElement("svg",d({width:"16px",height:"16px",viewBox:"0 0 16 16",ref:t},r),void 0===a?p:a?n.a.createElement("title",null,a):null,v,g)},y=n.a.forwardRef((function(e,t){return n.a.createElement(h,d({svgRef:t},e))}));a.p;function E(e){var t=!!e.stream,a=e.game?e.game.name:"En jeu",s=Object(r.useRef)(null),o=null,i=250,l=Object(r.useState)(0),c=Object(m.a)(l,2),u=(c[0],c[1]);return Object(r.useEffect)((function(){("ontouchstart"in window||navigator.MaxTouchPoints>0||navigator.msMaxTouchPoints>0)&&(i=0),s.current.style.setProperty("--posx",e.position.x+"vw"),s.current.style.setProperty("--posy",.5*e.position.y+"vw"),s.current.style.setProperty("--opacity",1),e.position.x>=55&&s.current.classList.add("rightClamp"),e.position.y>=55&&s.current.classList.add("bottomClamp");var t=window.getComputedStyle(s.current).getPropertyValue("--open-animation-time");setTimeout((function(){if(s.current.querySelector(".titleDiv")){var e=s.current.querySelector(".titleDiv").offsetHeight,t=s.current.querySelector(".streamTitle").offsetHeight;e<t&&(s.current.querySelector(".streamTitle").classList.add("addScroll"),s.current.querySelector(".streamTitle").style.setProperty("--animation-size",-100*(t/e-1)+"%"))}}),parseFloat(100+1e3*t.replace("s","")))})),n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{id:e.user.id,ref:s,className:"streamer-component ".concat(t?"live":"offline"),onClick:function(){},onMouseEnter:function(){o=setTimeout((function(){s.current.classList.add("detailedStream"),u(!0)}),i)},onMouseLeave:function(){s.current.classList.remove("detailedStream"),u(!1),clearTimeout(o)}},n.a.createElement("div",{className:"streamProps"},n.a.createElement("img",{className:"logo",src:e.user.profile_image_url,alt:"streamer logo",onClick:function(){window.open("https://www.twitch.tv/"+e.user.display_name,"_blank").focus()}}),n.a.createElement("div",{className:"logoSide"},n.a.createElement("span",{className:"name"},e.user.display_name),n.a.createElement("span",{className:"islive"},t?a:"Hors ligne"))),function(){if(s.current&&s.current.classList.contains("detailedStream"))return t?n.a.createElement(n.a.Fragment,null,n.a.createElement("img",{src:e.stream.thumbnail_url.replace("{width}",640).replace("{height}",360),className:"streamPreview"}),n.a.createElement("div",{className:"streamFooter"},n.a.createElement("div",{className:"titleDiv"},n.a.createElement("span",{className:"streamTitle"},e.stream.title)),n.a.createElement("span",{className:"streamViewers"},n.a.createElement("span",{className:"viewerCount"},e.stream.viewer_count),n.a.createElement(y,null)))):n.a.createElement("img",{src:e.user.offline_image_url.replace("1920",640).replace("1080",360),className:"streamPreview"})}()))}var b=a(2),w=a.n(b),S=(a(42),function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var r;return Object(i.a)(this,a),(r=t.call(this,e)).state={isLoading:!0},r.myRef=n.a.createRef(),r}return Object(l.a)(a,[{key:"setupTick",value:function(e){e.requestTimer=setInterval((function(){return e.tick()}),6e4)}},{key:"componentDidMount",value:function(){var e=this;this.requestAllData(this.setupTick),this.handleResize=function(){var t=e.myRef.current.clientWidth/2560;console.log(t),e.myRef.current.style.setProperty("--base-scale",t),t<.5?e.myRef.current.style.setProperty("--border-scale","1px"):t>1?e.myRef.current.style.setProperty("--border-scale","3px"):e.myRef.current.style.setProperty("--border-scale","2px")},window.addEventListener("resize",this.handleResize),this.handleResize()}},{key:"componentWillUnmount",value:function(){clearInterval(this.requestTimer),window.removeEventListener("resize",this.handleResize)}},{key:"tick",value:function(){this.requestStreamersData()}},{key:"requestAllData",value:function(e){var t=this;w.a.get("./data/allData.json",{}).then((function(a){if(console.log(a),200===a.status){t.setState({streams:a.data.streams}),t.setState({games:a.data.games}),t.setState({users:a.data.users}),t.setState({queryNumber:a.data.queryNumber}),t.setState({updateDate:a.data.upDate});var r=new Date(a.data.upDate);console.log("update time ",r.toLocaleString()),console.log("query number",a.data.queryNumber),t.setState({isLoading:!1}),e(t)}})).catch((function(e){console.log(e)})).then((function(){}))}},{key:"requestStreamersData",value:function(){var e=this,t="./zboard.github.io/data/streamGameData"+(this.state.queryNumber+1)+".json";w.a.get(t,{}).then((function(t){if(console.log(t),200===t.status){e.setState({streams:t.data.streams}),e.setState({games:t.data.games}),e.setState({queryNumber:t.data.queryNumber}),e.setState({updateDate:t.data.upDate});var a=new Date(t.data.upDate);console.log("update time ",a.toLocaleString()),console.log("query number",t.data.queryNumber),e.setState({isLoading:!1})}})).catch((function(e){console.log(e)})).then((function(){}))}},{key:"generateStreamerComponents",value:function(){var e=this;return this.state.users.data.map((function(t){var a=e.state.streams.data.find((function(e){return e.user_id===t.id})),r=e.state.users.positions[t.login];if(a){var s=e.state.games[a.game_id];return n.a.createElement(E,{key:t.id,user:t,stream:a,game:s,position:r})}return n.a.createElement(E,{key:t.id,user:t,position:r})}))}},{key:"render",value:function(){return this.state.isLoading?n.a.createElement("div",{className:"board-component",ref:this.myRef},"Loading..."):n.a.createElement("div",{className:"board-component",ref:this.myRef},this.generateStreamerComponents())}}]),a}(n.a.Component));a(43);function k(e){var t=Object(r.useRef)(null);return Object(r.useEffect)((function(){t.current.addEventListener("input",(function(e){var t;t=e.target.value,document.querySelectorAll("div.streamer-component").forEach((function(e){Array.from(e.querySelectorAll("div.logoSide span")).some((function(e){return!!(t.length>=3&&e.innerText.includes(t))}))?e.classList.add("found"):e.classList.remove("found")}))}))})),n.a.createElement("div",{className:"searchDiv",ref:t},n.a.createElement("input",{className:"searchBox",type:"text",spellCheck:"false"}))}var D=function(){return n.a.createElement(n.a.Fragment,null,n.a.createElement("nav",null,n.a.createElement("h1",{className:"mainLogo"},"ZBoard"),n.a.createElement(k,null)),n.a.createElement(S,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(n.a.createElement(n.a.StrictMode,null,n.a.createElement(D,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[18,1,2]]]);
//# sourceMappingURL=main.a67f0d8d.chunk.js.map