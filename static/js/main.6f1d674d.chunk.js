(this.webpackJsonpzboard=this.webpackJsonpzboard||[]).push([[0],{18:function(e,t,a){e.exports=a(45)},23:function(e,t,a){},24:function(e,t,a){},42:function(e,t,a){},43:function(e,t,a){},44:function(e,t,a){},45:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),s=a(12),o=a.n(s),l=(a(23),a(13)),i=a(14),c=a(17),u=a(15),m=a(16);a(24);function f(){return(f=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e}).apply(this,arguments)}function d(e,t){if(null==e)return{};var a,r,n=function(e,t){if(null==e)return{};var a,r,n={},s=Object.keys(e);for(r=0;r<s.length;r++)a=s[r],t.indexOf(a)>=0||(n[a]=e[a]);return n}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)a=s[r],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}var p=n.a.createElement("title",null,"person"),v=n.a.createElement("desc",null,"Created with Sketch."),y=n.a.createElement("g",{id:"Icons",stroke:"none",strokeWidth:1,fill:"none",fillRule:"evenodd"},n.a.createElement("g",{id:"Rounded",transform:"translate(-138.000000, -4102.000000)"},n.a.createElement("g",{id:"Social",transform:"translate(100.000000, 4044.000000)"},n.a.createElement("g",{id:"-Round-/-Social-/-person",transform:"translate(34.000000, 54.000000)"},n.a.createElement("g",null,n.a.createElement("polygon",{id:"Path",points:"0 0 24 0 24 24 0 24"}),n.a.createElement("path",{d:"M12,12 C14.21,12 16,10.21 16,8 C16,5.79 14.21,4 12,4 C9.79,4 8,5.79 8,8 C8,10.21 9.79,12 12,12 Z M12,14 C9.33,14 4,15.34 4,18 L4,19 C4,19.55 4.45,20 5,20 L19,20 C19.55,20 20,19.55 20,19 L20,18 C20,15.34 14.67,14 12,14 Z",id:"\\uD83D\\uDD39-Icon-Color",fill:"#1D1D1D"})))))),g=function(e){var t=e.svgRef,a=e.title,r=d(e,["svgRef","title"]);return n.a.createElement("svg",f({width:"16px",height:"16px",viewBox:"0 0 16 16",ref:t},r),void 0===a?p:a?n.a.createElement("title",null,a):null,v,y)},h=n.a.forwardRef((function(e,t){return n.a.createElement(g,f({svgRef:t},e))}));a.p;function E(e){var t=!!e.stream,a=e.game?e.game.name:"En jeu",s=Object(r.useRef)(null),o=null,l=250,i=Object(r.useState)(0),c=Object(m.a)(i,2),u=c[0],f=c[1];return Object(r.useEffect)((function(){("ontouchstart"in window||navigator.MaxTouchPoints>0||navigator.msMaxTouchPoints>0)&&(l=0),e.position||console.log(e),s.current.style.setProperty("--posx",e.position.x+"vw"),s.current.style.setProperty("--posy",.5*e.position.y+"vw"),s.current.style.setProperty("--opacity",1),e.position.x>=55&&s.current.classList.add("rightClamp"),e.position.y>=55&&s.current.classList.add("bottomClamp");var t=window.getComputedStyle(s.current).getPropertyValue("--open-animation-time");setTimeout((function(){if(s.current.querySelector(".titleDiv")){var e=s.current.querySelector(".titleDiv").offsetHeight,t=s.current.querySelector(".streamTitle").offsetHeight;e<t&&(s.current.querySelector(".streamTitle").classList.add("addScroll"),s.current.querySelector(".streamTitle").style.setProperty("--animation-size",-100*(t/e-1)+"%"))}}),parseFloat(100+1e3*t.replace("s","")))})),n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{id:e.user.id,ref:s,className:"streamer-component ".concat(t?"live":"offline"),onClick:function(){return console.log(u),void(u&&window.open("https://www.twitch.tv/"+e.user.display_name,"_blank").focus())},onMouseEnter:function(){o=setTimeout((function(){s.current.classList.add("detailedStream"),f(!0)}),l)},onMouseLeave:function(){s.current.classList.remove("detailedStream"),f(!1),clearTimeout(o)}},n.a.createElement("div",{className:"streamProps"},n.a.createElement("img",{className:"logo",src:e.user.profile_image_url,alt:"streamer logo"}),n.a.createElement("div",{className:"logoSide"},n.a.createElement("span",{className:"name"},e.user.display_name),n.a.createElement("span",{className:"islive"},t?a:"Hors ligne"))),function(){if(s.current&&s.current.classList.contains("detailedStream"))return t?n.a.createElement(n.a.Fragment,null,n.a.createElement("img",{src:e.stream.thumbnail_url.replace("{width}",640).replace("{height}",360),className:"streamPreview",alt:""}),n.a.createElement("div",{className:"streamFooter"},n.a.createElement("div",{className:"titleDiv"},n.a.createElement("span",{className:"streamTitle"},e.stream.title)),n.a.createElement("span",{className:"streamViewers"},n.a.createElement("span",{className:"viewerCount"},e.stream.viewer_count),n.a.createElement(h,null)))):n.a.createElement("img",{src:e.user.offline_image_url.replace("1920",640).replace("1080",360),className:"streamPreview"})}()))}var b=a(2),w=a.n(b);a(42),a(43);function k(e){var t=Object(r.useRef)(null);return Object(r.useEffect)((function(){t.current&&(t.current.style.setProperty("--posx",e.position.x+"vw"),t.current.style.setProperty("--posy",.5*e.position.y+"vw"),t.current.style.setProperty("--opacity",1))})),n.a.createElement("img",{ref:t,className:"linkComp "+e.id,src:e.image,onClick:function(){return t=e.link,void window.open(t,"_blank").focus();var t}})}var S=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var r;return Object(l.a)(this,a),(r=t.call(this,e)).state={isLoading:!0},r.myRef=n.a.createRef(),r.errors=0,r}return Object(i.a)(a,[{key:"setupTick",value:function(e){e.requestTimer=setInterval((function(){return e.tick()}),6e4)}},{key:"throttle",value:function(e,t){var a=!1;return function(){if(!a){for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];e.apply(this,n),a=!0,setTimeout((function(){a=!1}),t)}}}},{key:"componentDidMount",value:function(){var e=this,t=this;this.requestAllData(this.setupTick),this.handleResize=function(){var e=t.myRef.current.clientWidth/2560;console.log(e),t.myRef.current.style.setProperty("--base-scale",e),e<.5?t.myRef.current.style.setProperty("--border-scale","1px"):e>1?t.myRef.current.style.setProperty("--border-scale","3px"):t.myRef.current.style.setProperty("--border-scale","2px")},window.addEventListener("resize",this.throttle((function(){e.handleResize()}),500)),this.handleResize()}},{key:"componentWillUnmount",value:function(){clearInterval(this.requestTimer),window.removeEventListener("resize",this.handleResize)}},{key:"tick",value:function(){this.requestStreamersData()}},{key:"requestAllData",value:function(e){var t=this;w.a.get("./data/allData.json",{}).then((function(a){if(console.log(a),200===a.status){t.setState({streams:a.data.streams}),t.setState({games:a.data.games}),t.setState({users:a.data.users}),t.setState({queryNumber:a.data.queryNumber}),t.setState({updateDate:a.data.upDate});var r=new Date(a.data.upDate);console.log("update time ",r.toLocaleString()),console.log("query number",a.data.queryNumber),t.setState({isLoading:!1}),e(t)}})).catch((function(e){console.log(e)})).then((function(){}))}},{key:"requestStreamersData",value:function(){var e=this,t="data/streamGameData"+(this.state.queryNumber+1)+".json";this.errors>1&&(t="data/streamGameConstantData.json"),w.a.get(t,{}).then((function(t){if(console.log(t),200===t.status){e.setState({streams:t.data.streams}),e.setState({games:t.data.games}),e.setState({queryNumber:t.data.queryNumber}),e.setState({updateDate:t.data.upDate});var a=new Date(t.data.upDate);console.log("update time ",a.toLocaleString()),console.log("query number",t.data.queryNumber),e.setState({isLoading:!1}),e.errors=0}else e.errors+=1})).catch((function(t){console.log(t),e.errors+=1})).then((function(){}))}},{key:"generateStreamerComponents",value:function(){var e=this;return this.state.users.data.map((function(t){var a=e.state.streams.data.find((function(e){return e.user_id===t.id})),r=e.state.users.positions[t.login];if(a){var s=e.state.games[a.game_id];return n.a.createElement(E,{key:t.id,user:t,stream:a,game:s,position:r})}return n.a.createElement(E,{key:t.id,user:t,position:r})}))}},{key:"generateLinkComponents",value:function(){return this.state.users.links.map((function(e){return n.a.createElement(k,{key:e.id,id:e.id,link:e.link,scale:e.scale,position:e.pos,image:e.image})}))}},{key:"render",value:function(){return this.state.isLoading?n.a.createElement("div",{className:"board-component",ref:this.myRef},n.a.createElement("div",{className:"lds-dual-ring"})):n.a.createElement("div",{className:"board-component",ref:this.myRef},this.generateStreamerComponents(),this.generateLinkComponents())}}]),a}(n.a.Component);a(44);function O(){return(O=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e}).apply(this,arguments)}function N(e,t){if(null==e)return{};var a,r,n=function(e,t){if(null==e)return{};var a,r,n={},s=Object.keys(e);for(r=0;r<s.length;r++)a=s[r],t.indexOf(a)>=0||(n[a]=e[a]);return n}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)a=s[r],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}var j=n.a.createElement("defs",null,n.a.createElement("style",null,".cls-1{fill:none;stroke:#000;stroke-linecap:round;stroke-linejoin:round;stroke-width:2px;}")),D=n.a.createElement("title",null,"21.search"),L=n.a.createElement("g",{id:"_21.search","data-name":"21.search"},n.a.createElement("circle",{className:"cls-1",cx:9,cy:9,r:8}),n.a.createElement("line",{className:"cls-1",x1:15,y1:15,x2:23,y2:23})),R=function(e){var t=e.svgRef,a=e.title,r=N(e,["svgRef","title"]);return n.a.createElement("svg",O({viewBox:"0 0 24 24",ref:t},r),j,void 0===a?D:a?n.a.createElement("title",null,a):null,L)},x=n.a.forwardRef((function(e,t){return n.a.createElement(R,O({svgRef:t},e))}));a.p;function C(e){var t=Object(r.useRef)(null);return Object(r.useEffect)((function(){t.current.addEventListener("input",(function(e){var t;t=e.target.value,document.querySelectorAll("div.streamer-component").forEach((function(e){Array.from(e.querySelectorAll("div.logoSide span")).some((function(e){var a=t.normalize("NFD").replace(/[\u0300-\u036f]/g,"").toLowerCase().replace(/[^a-zA-Z0-9]/g,"");return!!(t.length>=3&&e.innerText.toLowerCase().replace(/[^a-zA-Z0-9]/g,"").includes(a))}))?e.classList.add("found"):e.classList.remove("found")}))})),t.current.addEventListener("click",(function(e){var a=t.current.querySelectorAll("input");a&&(console.log(a),a[0].focus())}))})),n.a.createElement("div",{className:"searchDiv",ref:t},n.a.createElement(x,null)," ",n.a.createElement("input",{className:"searchBox",type:"text",spellCheck:"false"}))}var P=function(){return n.a.createElement(n.a.Fragment,null,n.a.createElement("nav",null,n.a.createElement("h1",{className:"mainLogo"},"ZBoard"),n.a.createElement(C,null)),n.a.createElement(S,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(n.a.createElement(n.a.StrictMode,null,n.a.createElement(P,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[18,1,2]]]);
//# sourceMappingURL=main.6f1d674d.chunk.js.map